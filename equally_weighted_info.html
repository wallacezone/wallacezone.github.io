<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infografica: Guida all'Allocazione Geografica degli ETF</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Energetic & Playful -->
    <!-- Application Structure Plan: La narrativa guida l'utente da un problema a una soluzione. 1. Il Rischio Nascosto: mostra la concentrazione dei portafogli standard. 2. La Lezione della Storia: usa dati storici per dimostrare la ciclicit√† dei mercati. 3. Un Modo Pi√π Intelligente: introduce l'approccio equal-weight come alternativa. 4. Costruisci il Tuo Portafoglio: una sezione interattiva per confrontare modelli pratici. 5. Punti Chiave: riassume consigli pratici su tasse e valuta. Questa struttura trasforma un'analisi complessa in una storia visiva e comprensibile. -->
    <!-- Visualization & Content Choices: Concentrazione (Geo/Settore) -> Goal: Informare -> Viz: Donut Chart (Chart.js) -> Justification: Ideale per mostrare la composizione di un intero. Performance Storica -> Goal: Mostrare il cambiamento -> Viz: Line Chart (Chart.js) -> Justification: Evidenzia la ciclicit√† e la "reversione alla media". Market-Cap vs Equal-Weight -> Goal: Confrontare -> Viz: Due Donut Charts affiancati (Chart.js) -> Justification: Contrasto visivo immediato ed efficace. Portafogli Modello -> Goal: Organizzare/Confrontare -> Viz: Bar Chart dinamico (Chart.js) -> Justification: L'interattivit√† permette all'utente di esplorare attivamente le opzioni. Diagrammi (es. flusso) -> Goal: Organizzare -> Viz: HTML/CSS con Tailwind -> Justification: Semplice, pulito, evita librerie non consentite. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #f0f2f5; }
        .main-title { color: #003f5c; }
        .section-title { color: #37456b; }
        .card { background-color: white; border-radius: 16px; box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .stat-number { color: #ff6361; font-weight: 700; font-size: 3.5rem; line-height: 1; }
        .btn-portfolio { transition: all 0.3s ease; border: 2px solid transparent; }
        .btn-portfolio.active { transform: scale(1.05); background-color: #ff6361; color: white; border-color: #ff6361; box-shadow: 0 4px 14px 0 rgba(255, 99, 97, 0.39); }
        .btn-portfolio:not(.active) { background-color: #e0e0e0; color: #555; }
        .chart-container { position: relative; width: 100%; max-width: 450px; margin-left: auto; margin-right: auto; height: 300px; max-height: 350px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
    </style>
</head>
<body class="text-gray-700">

    <div class="container mx-auto px-4 py-12">

        <header class="text-center mb-20">
            <h1 class="text-4xl md:text-5xl font-bold main-title mb-4">Decodificare il Tuo Portafoglio Globale</h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">Una guida visiva per un'allocazione geografica pi√π intelligente del tuo investimento in ETF.</p>
        </header>

        <section id="section1" class="mb-24">
            <h2 class="text-3xl font-bold section-title text-center mb-4">Il Rischio Nascosto</h2>
            <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">Il tuo ETF "globale", basato sulla capitalizzazione di mercato, √® molto meno diversificato di quanto pensi. In realt√†, √® una scommessa concentrata su un singolo paese e settore.</p>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="card p-6 text-center">
                    <p class="text-lg font-semibold text-gray-800 mb-2">Concentrazione Geografica</p>
                    <p class="stat-number">65%</p>
                    <p class="text-xl text-gray-600">del portafoglio √® investito negli <strong class="text-bc5090">Stati Uniti</strong>.</p>
                    <div class="chart-container mt-4">
                        <canvas id="geoConcentrationChart"></canvas>
                    </div>
                </div>
                <div class="card p-6 text-center">
                    <p class="text-lg font-semibold text-gray-800 mb-2">Concentrazione Settoriale</p>
                    <p class="stat-number">27%</p>
                    <p class="text-xl text-gray-600">del portafoglio √® nel settore <strong class="text-bc5090">Tecnologico</strong>.</p>
                    <div class="chart-container mt-4">
                        <canvas id="sectorConcentrationChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="section2" class="mb-24">
            <h2 class="text-3xl font-bold section-title text-center mb-4">La Lezione della Storia</h2>
            <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">La leadership dei mercati non √® permanente. La storia dimostra che periodi di eccezionale performance sono spesso seguiti da rendimenti inferiori alla media (reversione alla media).</p>
            <div class="card p-6 md:p-8">
                <h3 class="text-xl font-bold text-center text-gray-800 mb-4">La Dominanza Regionale √® Ciclica (1995-2024)</h3>
                <div class="chart-container h-96 max-h-[450px]">
                    <canvas id="historicalPerformanceChart"></canvas>
                </div>
                 <p class="text-center text-sm text-gray-500 mt-4">L'analisi mostra come la leadership sia passata dal Giappone (anni '80), agli Emergenti (anni 2000), agli USA (dal 2010). Scommettere sul vincitore di ieri pu√≤ essere rischioso.</p>
            </div>
        </section>

        <section id="section3" class="mb-24">
            <h2 class="text-3xl font-bold section-title text-center mb-4">Un Modo Pi√π Intelligente per Diversificare</h2>
            <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">L'approccio "Equal Weight" (a peso equo) assegna a ogni azienda lo stesso peso, creando un portafoglio pi√π bilanciato e riducendo drasticamente la concentrazione.</p>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="card p-6 text-center">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Standard: Market-Cap</h3>
                    <div class="chart-container">
                        <canvas id="marketCapAllocChart"></canvas>
                    </div>
                    <p class="mt-4 font-semibold text-lg">USA: ~65%</p>
                </div>
                <div class="card p-6 text-center">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Alternativa: Equal-Weight</h3>
                    <div class="chart-container">
                        <canvas id="equalWeightAllocChart"></canvas>
                    </div>
                    <p class="mt-4 font-semibold text-lg">USA: ~41%</p>
                </div>
            </div>
        </section>

        <section id="section4" class="mb-24">
            <h2 class="text-3xl font-bold section-title text-center mb-4">Costruisci il Tuo Portafoglio Futuro</h2>
            <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">Esplora tre portafogli modello, dalla strategia passiva di base a un approccio pi√π diversificato e consapevole delle valutazioni di mercato.</p>
            <div class="flex flex-wrap justify-center gap-3 md:gap-4 mb-8">
                <button id="btn-p1" class="btn-portfolio active font-bold py-3 px-6 rounded-full" onclick="updatePortfolioView('p1')">Baseline Passiva</button>
                <button id="btn-p2" class="btn-portfolio font-bold py-3 px-6 rounded-full" onclick="updatePortfolioView('p2')">Geografico</button>
                <button id="btn-p3" class="btn-portfolio font-bold py-3 px-6 rounded-full" onclick="updatePortfolioView('p3')">Core-Satellite</button>
            </div>
            <div class="card p-6 md:p-8">
                <div class="grid lg:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 id="portfolio-title" class="text-2xl font-bold text-gray-800 mb-2">Portafoglio 1: Baseline Passiva</h3>
                        <p id="portfolio-philosophy" class="text-gray-600 mb-6">L'approccio pi√π semplice e a basso costo. Accetta i pesi del mercato, scommettendo sulla continuazione del momentum attuale.</p>
                        <div id="portfolio-details" class="space-y-4"></div>
                    </div>
                    <div class="chart-container h-80 max-h-[400px]">
                        <canvas id="portfolioAllocationChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="section5" class="mb-12">
            <h2 class="text-3xl font-bold section-title text-center mb-12">Punti Chiave per l'Investitore Italiano</h2>
            <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div class="card p-8">
                    <p class="text-4xl mb-4">üí±</p>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Rischio di Cambio</h3>
                    <p class="text-gray-600">Per un investimento azionario a lungo termine, la visione prevalente √® di <strong class="text-bc5090">non coprire</strong> il rischio di cambio. I costi erodono i rendimenti e l'esposizione a valute forti pu√≤ agire da diversificatore durante le crisi.</p>
                </div>
                <div class="card p-8">
                    <p class="text-4xl mb-4">üí∂</p>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Efficienza Fiscale</h3>
                    <p class="text-gray-600">La scelta pi√π efficiente √® un ETF <strong class="text-bc5090">UCITS ad Accumulazione (Acc)</strong>. I dividendi vengono reinvestiti senza tassazione immediata, massimizzando l'interesse composto e differendo l'imposta al momento della vendita.</p>
                </div>
            </div>
        </section>

    </div>

    <footer class="text-center py-8 px-4 bg-gray-800 text-gray-400">
        <p>Questa infografica √® a scopo puramente illustrativo. Le informazioni non costituiscono consulenza finanziaria.</p>
    </footer>

    <script>
        const chartColors = ['#003f5c', '#58508d', '#bc5090', '#ff6361', '#ffa600', '#8a5a44'];

        const dataStore = {
            geoConcentration: { labels: ['Stati Uniti', 'Giappone', 'Regno Unito', 'Cina', 'Francia', 'Altro'], data: [64.9, 4.7, 3.2, 3.0, 2.4, 21.8] },
            sectorConcentration: { labels: ['Tecnologia', 'Finanziari', 'Sanitario', 'Cons. Discrezionali', 'Industriali', 'Altro'], data: [26.6, 17.6, 8.5, 10.3, 10.9, 26.1] },
            historical: {
                labels: ['1995', '2000', '2005', '2010', '2015', '2020', '2024'],
                datasets: [
                    { label: 'USA', data: [100, 232, 221, 240, 420, 816, 1150], borderColor: '#003f5c', tension: 0.2, fill: false },
                    { label: 'Europa', data: [100, 184, 172, 153, 222, 278, 370], borderColor: '#bc5090', tension: 0.2, fill: false },
                    { label: 'Emergenti', data: [100, 109, 338, 569, 425, 654, 780], borderColor: '#ffa600', tension: 0.2, fill: false }
                ]
            },
            marketCapAlloc: { labels: ['Stati Uniti', 'Giappone', 'Regno Unito', 'Altro'], data: [65, 5, 3, 27] },
            equalWeightAlloc: { labels: ['Stati Uniti', 'Giappone', 'Canada', 'Regno Unito', 'Altro'], data: [41, 14, 7, 6, 32] },
            portfolios: {
                p1: {
                    title: 'Portafoglio 1: Baseline Passiva',
                    philosophy: "L'approccio pi√π semplice e a basso costo. Accetta i pesi del mercato, scommettendo sulla continuazione del momentum attuale.",
                    details: {
                        pro: ['Massima semplicit√†', 'Costi minimi', 'Nessuna manutenzione'],
                        con: ['Elevata concentrazione', 'Scommessa contro la storia', 'Vulnerabile a cali USA']
                    },
                    allocation: { labels: ['USA', 'Europa', 'Pacifico', 'Emergenti'], data: [65, 15, 7, 13] }
                },
                p2: {
                    title: 'Portafoglio 2: Geograficamente Diversificato',
                    philosophy: "Riconosce il rischio di concentrazione e mira a un maggiore equilibrio geografico attraverso un'allocazione strategica fissa.",
                    details: {
                        pro: ['Migliore diversificazione', 'Riduce rischio-paese', 'Disciplina l\'investitore'],
                        con: ['Richiede ribilanciamento', 'Costi leggermente superiori', 'Pu√≤ sottoperformare nel breve']
                    },
                    allocation: { labels: ['USA', 'Europa', 'Pacifico', 'Emergenti'], data: [45, 25, 15, 15] }
                },
                p3: {
                    title: 'Portafoglio 3: Ibrido Core-Satellite',
                    philosophy: "Un approccio sofisticato che combina un nucleo passivo con 'satelliti' tattici basati su analisi di lungo termine.",
                    details: {
                        pro: ['Mira a sovraperformare', 'Altamente personalizzabile', 'Combina passivo e attivo'],
                        con: ['Pi√π complesso da gestire', 'Richiede disciplina', 'Tracking error elevato']
                    },
                    allocation: { labels: ['USA', 'Europa', 'Pacifico', 'Emergenti'], data: [60, 13, 7, 20] }
                }
            }
        };

        let portfolioAllocationChart;

        const chartTooltipOptions = {
            plugins: {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            return Array.isArray(label) ? label.join(' ') : label;
                        }
                    }
                }
            }
        };

        function createDonutChart(ctx, labels, data) {
            new Chart(ctx, {
                type: 'doughnut',
                data: { labels, datasets: [{ data, backgroundColor: chartColors, borderWidth: 0 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { ...chartTooltipOptions.plugins, legend: { display: false } } }
            });
        }
        
        function createLineChart(ctx, data) {
            new Chart(ctx, {
                type: 'line',
                data: data,
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: false } }, plugins: { ...chartTooltipOptions.plugins, legend: { position: 'bottom' } } }
            });
        }

        function updatePortfolioView(portfolioId) {
            const portfolio = dataStore.portfolios[portfolioId];
            document.querySelectorAll('.btn-portfolio').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${portfolioId}`).classList.add('active');

            document.getElementById('portfolio-title').innerText = portfolio.title;
            document.getElementById('portfolio-philosophy').innerText = portfolio.philosophy;

            const detailsContainer = document.getElementById('portfolio-details');
            detailsContainer.innerHTML = `
                <div>
                    <h4 class="font-bold text-green-600">Pro</h4>
                    <ul class="list-disc list-inside text-gray-600">${portfolio.details.pro.map(item => `<li>${item}</li>`).join('')}</ul>
                </div>
                <div>
                    <h4 class="font-bold text-red-500">Contro</h4>
                    <ul class="list-disc list-inside text-gray-600">${portfolio.details.con.map(item => `<li>${item}</li>`).join('')}</ul>
                </div>
            `;

            if (portfolioAllocationChart) {
                portfolioAllocationChart.data.labels = portfolio.allocation.labels;
                portfolioAllocationChart.data.datasets[0].data = portfolio.allocation.data;
                portfolioAllocationChart.update();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            createDonutChart(document.getElementById('geoConcentrationChart').getContext('2d'), dataStore.geoConcentration.labels, dataStore.geoConcentration.data);
            createDonutChart(document.getElementById('sectorConcentrationChart').getContext('2d'), dataStore.sectorConcentration.labels, dataStore.sectorConcentration.data);
            createLineChart(document.getElementById('historicalPerformanceChart').getContext('2d'), dataStore.historical);
            createDonutChart(document.getElementById('marketCapAllocChart').getContext('2d'), dataStore.marketCapAlloc.labels, dataStore.marketCapAlloc.data);
            createDonutChart(document.getElementById('equalWeightAllocChart').getContext('2d'), dataStore.equalWeightAlloc.labels, dataStore.equalWeightAlloc.data);

            const portfolioCtx = document.getElementById('portfolioAllocationChart').getContext('2d');
            const initialPortfolio = dataStore.portfolios.p1;
            portfolioAllocationChart = new Chart(portfolioCtx, {
                type: 'bar',
                data: {
                    labels: initialPortfolio.allocation.labels,
                    datasets: [{
                        label: 'Allocazione Geografica',
                        data: initialPortfolio.allocation.data,
                        backgroundColor: chartColors
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: { x: { beginAtZero: true, max: 70, ticks: { callback: (v) => v + '%' } } },
                    plugins: { ...chartTooltipOptions.plugins, legend: { display: false } }
                }
            });
            updatePortfolioView('p1');
        });
    </script>
</body>
</html>
