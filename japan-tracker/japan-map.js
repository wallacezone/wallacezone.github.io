/**
 * Japan SVG Map - Prefecture Paths
 * Contains SVG path data for all 47 prefectures
 */

const PREFECTURE_PATHS = {
    'JP-01': 'M520,45 L540,50 L555,48 L570,55 L580,65 L590,80 L595,95 L590,110 L580,125 L570,135 L555,140 L545,145 L535,155 L525,165 L515,170 L505,165 L495,155 L485,145 L480,130 L475,115 L472,100 L470,85 L475,70 L485,58 L500,48 L520,45 Z', // Hokkaido
    'JP-02': 'M515,195 L525,190 L535,192 L543,198 L548,206 L545,215 L538,222 L528,225 L518,223 L510,216 L508,206 L512,198 L515,195 Z', // Aomori
    'JP-03': 'M520,230 L530,228 L540,232 L545,240 L543,250 L538,258 L530,262 L520,260 L512,252 L510,242 L515,234 L520,230 Z', // Iwate
    'JP-04': 'M518,268 L528,265 L538,268 L543,276 L540,286 L532,292 L522,290 L514,282 L513,272 L518,268 Z', // Miyagi
    'JP-05': 'M505,225 L515,223 L523,227 L526,235 L522,243 L514,247 L505,245 L498,237 L497,228 L505,225 Z', // Akita
    'JP-06': 'M508,252 L518,250 L526,254 L528,262 L524,270 L516,274 L508,272 L502,264 L503,255 L508,252 Z', // Yamagata
    'JP-07': 'M515,278 L525,276 L533,280 L535,288 L531,296 L523,300 L515,298 L509,290 L510,281 L515,278 Z', // Fukushima
    'JP-08': 'M525,305 L535,303 L543,307 L545,315 L541,323 L533,327 L525,325 L519,317 L520,308 L525,305 Z', // Ibaraki
    'JP-09': 'M515,298 L525,296 L533,300 L535,308 L531,316 L523,320 L515,318 L509,310 L510,301 L515,298 Z', // Tochigi
    'JP-10': 'M505,303 L515,301 L523,305 L525,313 L521,321 L513,325 L505,323 L499,315 L500,306 L505,303 Z', // Gunma
    'JP-11': 'M520,325 L530,323 L538,327 L540,335 L536,343 L528,347 L520,345 L514,337 L515,328 L520,325 Z', // Saitama
    'JP-12': 'M530,330 L540,328 L548,332 L550,340 L546,348 L538,352 L530,350 L524,342 L525,333 L530,330 Z', // Chiba
    'JP-13': 'M528,338 L538,336 L546,340 L548,348 L544,356 L536,360 L528,358 L522,350 L523,341 L528,338 Z', // Tokyo
    'JP-14': 'M520,345 L530,343 L538,347 L540,355 L536,363 L528,367 L520,365 L514,357 L515,348 L520,345 Z', // Kanagawa
    'JP-15': 'M490,285 L500,283 L508,287 L510,295 L506,303 L498,307 L490,305 L484,297 L485,288 L490,285 Z', // Niigata
    'JP-16': 'M478,308 L488,306 L496,310 L498,318 L494,326 L486,330 L478,328 L472,320 L473,311 L478,308 Z', // Toyama
    'JP-17': 'M475,318 L485,316 L493,320 L495,328 L491,336 L483,340 L475,338 L469,330 L470,321 L475,318 Z', // Ishikawa
    'JP-18': 'M475,330 L485,328 L493,332 L495,340 L491,348 L483,352 L475,350 L469,342 L470,333 L475,330 Z', // Fukui
    'JP-19': 'M505,320 L515,318 L523,322 L525,330 L521,338 L513,342 L505,340 L499,332 L500,323 L505,320 Z', // Yamanashi
    'JP-20': 'M495,308 L505,306 L513,310 L515,318 L511,326 L503,330 L495,328 L489,320 L490,311 L495,308 Z', // Nagano
    'JP-21': 'M485,330 L495,328 L503,332 L505,340 L501,348 L493,352 L485,350 L479,342 L480,333 L485,330 Z', // Gifu
    'JP-22': 'M510,338 L520,336 L528,340 L530,348 L526,356 L518,360 L510,358 L504,350 L505,341 L510,338 Z', // Shizuoka
    'JP-23': 'M495,345 L505,343 L513,347 L515,355 L511,363 L503,367 L495,365 L489,357 L490,348 L495,345 Z', // Aichi
    'JP-24': 'M500,355 L510,353 L518,357 L520,365 L516,373 L508,377 L500,375 L494,367 L495,358 L500,355 Z', // Mie
    'JP-25': 'M480,353 L490,351 L498,355 L500,363 L496,371 L488,375 L480,373 L474,365 L475,356 L480,353 Z', // Shiga
    'JP-26': 'M475,363 L485,361 L493,365 L495,373 L491,381 L483,385 L475,383 L469,375 L470,366 L475,363 Z', // Kyoto
    'JP-27': 'M478,373 L488,371 L496,375 L498,383 L494,391 L486,395 L478,393 L472,385 L473,376 L478,373 Z', // Osaka
    'JP-28': 'M465,368 L475,366 L483,370 L485,378 L481,386 L473,390 L465,388 L459,380 L460,371 L465,368 Z', // Hyogo
    'JP-29': 'M485,380 L495,378 L503,382 L505,390 L501,398 L493,402 L485,400 L479,392 L480,383 L485,380 Z', // Nara
    'JP-30': 'M488,390 L498,388 L506,392 L508,400 L504,408 L496,412 L488,410 L482,402 L483,393 L488,390 Z', // Wakayama
    'JP-31': 'M445,375 L455,373 L463,377 L465,385 L461,393 L453,397 L445,395 L439,387 L440,378 L445,375 Z', // Tottori
    'JP-32': 'M430,378 L440,376 L448,380 L450,388 L446,396 L438,400 L430,398 L424,390 L425,381 L430,378 Z', // Shimane
    'JP-33': 'M453,383 L463,381 L471,385 L473,393 L469,401 L461,405 L453,403 L447,395 L448,386 L453,383 Z', // Okayama
    'JP-34': 'M438,388 L448,386 L456,390 L458,398 L454,406 L446,410 L438,408 L432,400 L433,391 L438,388 Z', // Hiroshima
    'JP-35': 'M430,398 L440,396 L448,400 L450,408 L446,416 L438,420 L430,418 L424,410 L425,401 L430,398 Z', // Yamaguchi
    'JP-36': 'M468,408 L478,406 L486,410 L488,418 L484,426 L476,430 L468,428 L462,420 L463,411 L468,408 Z', // Tokushima
    'JP-37': 'M463,403 L473,401 L481,405 L483,413 L479,421 L471,425 L463,423 L457,415 L458,406 L463,403 Z', // Kagawa
    'JP-38': 'M453,413 L463,411 L471,415 L473,423 L469,431 L461,435 L453,433 L447,425 L448,416 L453,413 Z', // Ehime
    'JP-39': 'M465,423 L475,421 L483,425 L485,433 L481,441 L473,445 L465,443 L459,435 L460,426 L465,423 Z', // Kochi
    'JP-40': 'M405,433 L415,431 L423,435 L425,443 L421,451 L413,455 L405,453 L399,445 L400,436 L405,433 Z', // Fukuoka
    'JP-41': 'M400,443 L410,441 L418,445 L420,453 L416,461 L408,465 L400,463 L394,455 L395,446 L400,443 Z', // Saga
    'JP-42': 'M390,448 L400,446 L408,450 L410,458 L406,466 L398,470 L390,468 L384,460 L385,451 L390,448 Z', // Nagasaki
    'JP-43': 'M408,453 L418,451 L426,455 L428,463 L424,471 L416,475 L408,473 L402,465 L403,456 L408,453 Z', // Kumamoto
    'JP-44': 'M418,443 L428,441 L436,445 L438,453 L434,461 L426,465 L418,463 L412,455 L413,446 L418,443 Z', // Oita
    'JP-45': 'M415,463 L425,461 L433,465 L435,473 L431,481 L423,485 L415,483 L409,475 L410,466 L415,463 Z', // Miyazaki
    'JP-46': 'M408,478 L418,476 L426,480 L428,488 L424,496 L416,500 L408,498 L402,490 L403,481 L408,478 Z', // Kagoshima
    'JP-47': 'M380,540 L390,538 L398,542 L400,550 L396,558 L388,562 L380,560 L374,552 L375,543 L380,540 Z'  // Okinawa
};

/**
 * Initialize the SVG map by injecting prefecture paths
 */
function initializeMap() {
    const svgMap = document.getElementById('japan-map');
    
    if (!svgMap) {
        console.error('SVG map element not found');
        return;
    }
    
    // Clear any existing content
    svgMap.innerHTML = '';
    
    // Create a group for all prefectures
    const prefectureGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
    prefectureGroup.setAttribute('id', 'prefectures-group');
    
    // Add each prefecture path
    Object.keys(PREFECTURE_PATHS).forEach(prefId => {
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('id', prefId);
        path.setAttribute('d', PREFECTURE_PATHS[prefId]);
        path.setAttribute('class', 'prefecture-path');
        path.setAttribute('data-prefecture', prefId);
        
        // Add title for accessibility
        const title = document.createElementNS('http://www.w3.org/2000/svg', 'title');
        const prefData = PREFECTURES[prefId];
        title.textContent = prefData ? `${prefData.name} (${prefData.nameJa})` : prefId;
        path.appendChild(title);
        
        prefectureGroup.appendChild(path);
    });
    
    svgMap.appendChild(prefectureGroup);
    
    console.log('âœ“ Japan map initialized with 47 prefectures');
}

// Initialize map when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializeMap);
} else {
    initializeMap();
}
